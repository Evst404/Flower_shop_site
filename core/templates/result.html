{% extends 'base.html' %}
{% block title %} - Результат{% endblock %}
{% block content %}
    {% load static %}
    <header id="header">
        <div class="container">
            <div class="header ficb">
                <a href="{% url 'index' %}"><img src="{% static 'img/logo.svg' %}" alt="logo" class="logo"></a>
                <nav>
                    <ul class="menu ficc">
                        <li class="menu__item"><a href="{% url 'catalog' %}" class="menu__item_link">Каталог</a></li>
                        <li class="menu__item"><a href="{% url 'quiz' %}" class="menu__item_link">Рекомендации</a></li>
                        <li class="menu__item"><a href="{% url 'index' %}#contacts" class="menu__item_link">Контакты</a></li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>
    <section id="result">
        <div class="container">
            <div class="result p100">
                <div class="title">Мы подобрали специально для Вас</div>
                {% if bouquet %}
                <div class="result__block ficb">
                    <div class="result__elems">
                        <div class="card__elems">
                            <span class="card__elems_intro">Описание:</span>
                            <div class="card__items">
                                <p class="card__items_text card__items_text__first">{{ bouquet.description|default:"Описание отсутствует" }}</p>
                            </div>
                        </div>
                        <div class="card__elems">
                            <span class="card__elems_intro">Состав:</span>
                            <div class="card__items">
                                <p class="card__items_text card__items_text__first">
                                    {% if bouquet.composition %}
                                        {{ bouquet.composition }}
                                    {% else %}
                                        Состав не указан
                                    {% endif %}
                                </p>
                            </div>
                        </div>
                    </div>
                    <img src="{% if bouquet.image %}{{ bouquet.image.url }}{% else %}{% static 'img/cardImg.jpg' %}{% endif %}" alt="{{ bouquet.name }}" class="result__block_img">
                    <div class="result__items">
                        <div class="title result__items_title">{{ bouquet.name }}</div>
                        <div class="result__items_price">{{ bouquet.price }} руб</div>
                        <a href="{% url 'order' bouquet.id %}" class="btn result__items_btn">Заказать букет</a>
                        <hr class="result__items_line" />
                        <div class="result__items_intro">Хотите что-то более специальное?</div>
                        <div class="result__items_block">
                            <a href="{% url 'catalog' %}" class="btn largeBtn result__items_block__btn">Смотреть всю коллекцию</a>
                            <a href="{% url 'consultation' %}" class="btn largeBtn result__items_block__btn">Заказать консультацию</a>
                        </div>
                    </div>
                </div>
                {% else %}
                    <p>Букет не найден. Попробуйте снова.</p>
                {% endif %}
            </div>
        </div>
    </section>
    <section id="contacts">
        <div class="container">
            <div class="contacts">
                <div class="title">Как нас найти</div>
                <div class="contacts__elems ficb">
                    <div class="contacts__block">
                        <div class="contacts__block_item ficc">
                            <div class="contacts__block_intro">ул. Пушкинская, 69</div>
                            <a href="tel:89111744460" class="contacts__block_tel">8 (911) 17 44 460</a>
                        </div>
                        <div class="contacts__block_item ficc">
                            <div class="contacts__block_intro">ул. Жукова, 13</div>
                            <a href="tel:89112855571" class="contacts__block_tel">8 (911) 28 55 571</a>
                        </div>
                        <div class="contacts__block_item ficc">
                            <div class="contacts__block_intro">ул. Красная, 384</div>
                            <a href="tel:89113966682" class="contacts__block_tel">8 (911) 39 66 682</a>
                        </div>
                    </div>
                    <img src="{% static 'img/contactsImg.jpg' %}" alt="contactsImg" class="contacts__img">
                    <div class="contacts__map">
                        <script type="text/javascript" charset="utf-8" async src="https://api-maps.yandex.ru/services/constructor/1.0/js/?um=constructor%3Af39d7a7f1829359b6ffe21ab6356fcaeace17d528d6522dba8772f885c8b1a7d&amp;width=398&amp;height=316&amp;lang=ru_RU&amp;scroll=true"></script>
                    </div>
                </div>
                <a href="{% url 'catalog' %}" class="btn contacts__btn">Заказать доставку</a>
            </div>
        </div>
    </section>
    <section id="consultation">
        <div class="container">
            <div class="consultation">
                <div class="title consultation__title">Оставьте заявку на консультацию</div>
                <form action="{% url 'result' bouquet.id %}" method="post" class="consultation__form">
                    {% csrf_token %}
                    {% if consultation_form.name.errors %}
                        <span style="color: red;">{{ consultation_form.name.errors.0 }}</span>
                    {% endif %}
                    <input type="text" name="name" class="consultation__form_input" placeholder="Введите Имя" value="{{ consultation_form.name.value|default:'' }}" required>
                    {% if consultation_form.phone.errors %}
                        <span style="color: red;">{{ consultation_form.phone.errors.0 }}</span>
                    {% endif %}
                    <input type="text" name="phone" class="consultation__form_input" placeholder="+7 (999) 000 00 00" value="{{ consultation_form.phone.value|default:'' }}" required>
                    <button type="submit" class="consultation__form_btn">Отправить</button>
                </form>
            </div>
        </div>
    </section>
    <footer id="footer">
        <div class="container">
            <div class="footer">
                <a href="{% url 'index' %}"><img src="{% static 'img/logo.svg' %}" alt="logo" class="logo footer__logo"></a>
                <nav>
                    <ul class="menu footer__menu ficc">
                        <li class="menu__item"><a href="{% url 'catalog' %}" class="menu__item_link">Каталог</a></li>
                        <li class="menu__item"><a href="{% url 'quiz' %}" class="menu__item_link">Рекомендации</a></li>
                        <li class="menu__item"><a href="{% url 'index' %}#contacts" class="menu__item_link">Контакты</a></li>
                    </ul>
                </nav>
                <hr class="line"></hr>
                <a href="#" class="footer__poli">Политика конфиденциальности</a>
                <p class="footer_cop">©️2025. FlowerShop. Все права защищены</p>
            </div>
        </div>
    </footer>
{% endblock %}